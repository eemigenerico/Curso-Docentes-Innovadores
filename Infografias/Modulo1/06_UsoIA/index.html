<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infograf√≠a: Tu Primera Tarea con IA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA;
        }

        .spinner {
            border-top-color: #3498db;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body class="text-[#2D2D2A]">
    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        <header class="text-center my-8 md:my-16">
            <h1 class="text-4xl md:text-6xl font-black text-[#00A6ED] uppercase tracking-wide">Tu Primera Tarea
                Inteligente</h1>
            <p class="text-xl md:text-2xl mt-4 font-bold text-[#2D2D2A]">Una gu&iacute;a pr&aacute;ctica para usar la IA
                como tu copiloto en Google Classroom.</p>
        </header>

        <main class="space-y-12">

            <section class="bg-white rounded-lg shadow-lg p-6 border-t-8 border-[#00A6ED]">
                <h2 class="text-3xl font-bold text-[#00A6ED] mb-2">Paso 1: Encuentra la Chispa Creativa con IA</h2>
                <p class="mb-6">Toda gran tarea empieza con una buena idea. Usa este generador para superar el bloqueo
                    de la "p&aacute;gina en blanco" y encontrar inspiraci&oacute;n.</p>
                <div class="bg-blue-50 p-6 rounded-lg">
                    <h3 class="text-xl font-bold mb-4 text-blue-800">Generador de Ideas para Tareas</h3>
                    <div class="space-y-4">
                        <input type="text" id="subjectInput" placeholder="Materia (ej. Historia de M√©xico)"
                            class="w-full p-2 rounded border border-blue-200 text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-400">
                        <input type="text" id="topicInput" placeholder="Tema (ej. La Independencia)"
                            class="w-full p-2 rounded border border-blue-200 text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-400">
                        <button id="generateIdeasBtn"
                            class="w-full bg-[#00A6ED] text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors duration-300">
                            ‚ú® Generar Ideas
                        </button>
                        <div id="ideasOutput"
                            class="mt-4 bg-blue-100 p-4 rounded-lg min-h-[120px] text-sm text-blue-900"></div>
                    </div>
                </div>
            </section>

            <section class="bg-white rounded-lg shadow-lg p-6 border-t-8 border-[#7FB800]">
                <h2 class="text-3xl font-bold text-[#7FB800] mb-2">Paso 2: Construye la Tarea Perfecta</h2>
                <p class="mb-6">Ahora que tienes una idea, deja que la IA te ayude a estructurarla. Pega una de las
                    ideas generadas o escribe la tuya y obt&eacute;n un borrador completo para tu tarea en Classroom.
                </p>
                <div class="bg-green-50 p-6 rounded-lg">
                    <h3 class="text-xl font-bold mb-4 text-green-800">Asistente de Creaci&oacute;n de Tareas</h3>
                    <div class="space-y-4">
                        <textarea id="taskIdeaInput" rows="3"
                            placeholder="Pega la idea de la tarea aqu√≠ (ej. Crear una l√≠nea de tiempo interactiva...)"
                            class="w-full p-2 rounded border border-green-200 text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-400"></textarea>
                        <input type="text" id="courseLevelInput" placeholder="Nivel del curso (ej. Secundaria)"
                            class="w-full p-2 rounded border border-green-200 text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-400">
                        <button id="generateTaskBtn"
                            class="w-full bg-[#7FB800] text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700 transition-colors duration-300">
                            üìù Construir Tarea
                        </button>
                        <div id="taskOutput"
                            class="mt-4 bg-green-100 p-4 rounded-lg min-h-[200px] text-sm text-green-900 whitespace-pre-wrap">
                        </div>
                    </div>
                </div>
            </section>

            <section class="bg-white rounded-lg shadow-lg p-6 border-t-8 border-[#FFB400]">
                <h2 class="text-3xl font-bold text-[#FFB400] mb-2">Paso 3: Refina con Buenas Pr&aacute;cticas</h2>
                <p class="mb-6">La IA te da el borrador, pero tu experiencia docente lo perfecciona. Integra estos
                    consejos clave que ya vimos en el curso para asegurar que tu tarea sea un &eacute;xito.</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-400">
                        <h3 class="font-bold text-yellow-800">üìÇ As&iacute;gnala a un "Tema"</h3>
                        <p class="text-sm mt-1">Para mantener el orden, aseg&uacute;rate de asignar la tarea a un tema
                            espec&iacute;fico en "Trabajo en Clase". La organizaci&oacute;n es clave.</p>
                    </div>
                    <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-400">
                        <h3 class="font-bold text-yellow-800">üéØ A&ntilde;ade una R&uacute;brica</h3>
                        <p class="text-sm mt-1">Define criterios de evaluaci&oacute;n claros. Esto da transparencia al
                            alumno y agiliza tu calificaci&oacute;n.</p>
                    </div>
                    <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-400">
                        <h3 class="font-bold text-yellow-800">üì† Usa "Hacer una copia"</h3>
                        <p class="text-sm mt-1">Si adjuntas una plantilla (Docs, Slides), usa la opci&oacute;n "Hacer
                            una copia para cada alumno" para automatizar la entrega individual.</p>
                    </div>
                </div>
            </section>

            <section class="bg-white rounded-lg shadow-lg p-6 border-t-8 border-[#F6511D]">
                <h2 class="text-3xl font-bold text-[#F6511D] mb-2">Paso 4: Comunica con Claridad</h2>
                <p class="mb-6">Una tarea bien comunicada es una tarea bien recibida. Usa la IA para redactar un anuncio
                    claro y motivador para tus estudiantes en el tabl&oacute;n de "Novedades".</p>
                <div class="bg-red-50 p-6 rounded-lg">
                    <h3 class="text-xl font-bold mb-4 text-red-800">Asistente de Anuncios de Tareas</h3>
                    <div class="space-y-4">
                        <select id="announcementType"
                            class="w-full p-2 rounded border border-red-200 text-gray-800 focus:outline-none focus:ring-2 focus:ring-red-400">
                            <option>Anuncio de Tarea Nueva</option>
                            <option>Recordatorio de Entrega</option>
                            <option>Extensi&oacute;n de Plazo</option>
                            <option>Felicitaciones por buen trabajo</option>
                        </select>
                        <input type="text" id="detailInput" placeholder="Detalle clave (ej. Tarea 'L√≠nea de Tiempo')"
                            class="w-full p-2 rounded border border-red-200 text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-400">
                        <button id="generateAnnouncementBtn"
                            class="w-full bg-[#F6511D] text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 transition-colors duration-300">
                            üì¢ Redactar Anuncio
                        </button>
                        <div id="announcementOutput"
                            class="mt-4 bg-red-100 p-4 rounded-lg min-h-[120px] text-sm text-red-900"></div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="text-center my-8 md:my-16">
            <p class="text-xl md:text-2xl font-bold text-[#00A6ED]">&iexcl;Felicidades! Has creado tu primera tarea con
                un asistente de IA. <br>Est&aacute;s un paso m&aacute;s cerca de un aula m&aacute;s din&aacute;mica y
                eficiente.</p>
        </footer>
    </div>

    <script>
        // --- API & Helper Functions (CORREGIDO) ---
        const callGeminiAPI = async (prompt, retries = 3, delay = 1000) => {
            // ¬°ADVERTENCIA DE SEGURIDAD!
            // Exponer una API Key en el c√≥digo del lado del cliente es muy riesgoso.
            // Cualquiera puede verla y usarla. Para un producto real, esto debe manejarse
            // a trav√©s de un backend (servidor) que oculte la clave.
            const apiKey = "AIzaSyBbuGm12FHufYfnKUJlPWg4zQHvq_02yUU"; // Tu API Key aqu√≠

            // --- LA CORRECCI√ìN EST√Å AQU√ç ---
            // Apuntamos al mismo modelo que s√≠ te funciona en la otra infograf√≠a.
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{
                    parts: [{
                        text: prompt
                    }]
                }]
            };

            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    const result = await response.json();
                    if (result.candidates && result.candidates[0].content && result.candidates[0].content.parts[0]) {
                        return result.candidates[0].content.parts[0].text;
                    } else {
                        return "La respuesta fue generada pero no se puede mostrar. Intenta con una pregunta diferente.";
                    }
                } catch (error) {
                    console.error("API Call Error:", error);
                    if (i === retries - 1) return "Lo sentimos, no se pudo generar una respuesta. Por favor, intenta de nuevo m√°s tarde.";
                    await new Promise(res => setTimeout(res, delay * Math.pow(2, i)));
                }
            }
        };

        const showLoading = (element) => {
            element.innerHTML = `<div class="flex justify-center items-center h-full"><div class="spinner w-8 h-8 rounded-full border-4 border-gray-400/30"></div></div>`;
        };

        // --- PASO 1: Generador de Ideas ---
        const generateIdeasBtn = document.getElementById('generateIdeasBtn');
        const ideasOutput = document.getElementById('ideasOutput');
        const subjectInput = document.getElementById('subjectInput');
        const topicInput = document.getElementById('topicInput');

        generateIdeasBtn.addEventListener('click', async () => {
            const subject = subjectInput.value;
            const topic = topicInput.value;
            if (!subject || !topic) {
                ideasOutput.innerText = 'Por favor, completa los campos de materia y tema.';
                return;
            }
            showLoading(ideasOutput);
            const prompt = `Act√∫a como un dise√±ador instruccional experto. Genera 3 ideas de tareas creativas y originales para Google Classroom sobre el tema '${topic}' para la materia de '${subject}'. Las ideas deben ser concisas y pr√°cticas. Formatea la respuesta como una lista con vi√±etas.`;
            const result = await callGeminiAPI(prompt);
            ideasOutput.innerHTML = result.replace(/\* /g, '<p class="mb-2"><strong>-</strong> ').replace(/\n/g, '</p>');
        });

        // --- PASO 2: Constructor de Tareas ---
        const generateTaskBtn = document.getElementById('generateTaskBtn');
        const taskOutput = document.getElementById('taskOutput');
        const taskIdeaInput = document.getElementById('taskIdeaInput');
        const courseLevelInput = document.getElementById('courseLevelInput');

        generateTaskBtn.addEventListener('click', async () => {
            const idea = taskIdeaInput.value;
            const level = courseLevelInput.value;
            if (!idea || !level) {
                taskOutput.innerText = 'Por favor, introduce la idea de la tarea y el nivel del curso.';
                return;
            }
            showLoading(taskOutput);
            const prompt = `Act√∫a como un profesor experto en dise√±o instruccional. Basado en la siguiente idea de tarea: '${idea}', redacta una descripci√≥n completa para una tarea en Google Classroom para alumnos de '${level}'. La respuesta debe incluir, con formato claro y separado:
1.  Un **T√≠tulo** creativo y claro.
2.  **Instrucciones** detalladas en formato de lista paso a paso.
3.  Una secci√≥n de **Entregables** que especifique exactamente qu√© debe subir el alumno.`;
            const result = await callGeminiAPI(prompt);
            taskOutput.innerText = result;
        });

        // --- PASO 4: Asistente de Anuncios ---
        const generateAnnouncementBtn = document.getElementById('generateAnnouncementBtn');
        const announcementOutput = document.getElementById('announcementOutput');
        const announcementType = document.getElementById('announcementType');
        const detailInput = document.getElementById('detailInput');

        generateAnnouncementBtn.addEventListener('click', async () => {
            const type = announcementType.value;
            const detail = detailInput.value;
            if (!detail) {
                announcementOutput.innerText = 'Por favor, a√±ade un detalle clave.';
                return;
            }
            showLoading(announcementOutput);
            const prompt = `Act√∫a como un profesor amigable y eficiente. Redacta un anuncio corto y profesional para publicar en Google Classroom. El tipo de anuncio es: '${type}'. El detalle clave es: '${detail}'. El tono debe ser positivo y claro.`;
            const result = await callGeminiAPI(prompt);
            announcementOutput.innerText = result;
        });
    </script>
</body>

</html>
